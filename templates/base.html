<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SynchSphere</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-b from-gray-900 to-gray-800 min-h-screen text-white">
  {% if messages %}
  <div class="fixed top-4 right-4 z-50">
    {% for message in messages %}
    <div class="bg-gray-800 border border-gray-700 text-sm px-4 py-2 rounded-lg mb-2 shadow-lg">
      {{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %}

  {% block content %}{% endblock %}
  <script>
    // Simple SSE listener for development: listens to /events/ and shows messages
    if (typeof EventSource !== 'undefined') {
      const es = new EventSource('/events/');
      es.addEventListener('connected', function(e){ console.debug('SSE connected') });
      es.onmessage = function(e){
        // default message
        const el = document.createElement('div');
        el.className = 'fixed bottom-6 right-6 bg-gray-800 border border-gray-700 text-sm px-4 py-2 rounded-lg shadow-lg';
        el.textContent = e.data;
        document.body.appendChild(el);
        setTimeout(()=> el.remove(), 5000);
      };
      es.addEventListener('user.logged_in', function(e){
        const el = document.createElement('div');
        el.className = 'fixed bottom-6 right-6 bg-green-700 text-sm px-4 py-2 rounded-lg shadow-lg';
        el.textContent = 'User logged in: ' + e.data;
        document.body.appendChild(el);
        setTimeout(()=> el.remove(), 5000);
      });
    }
  </script>
</body>
</html>
